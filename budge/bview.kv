
<CategorySetterButton@Button>:
    size_hint_y: None
    height:30
    background_color: 1,1,1,1
    color: 0,0,0,1
    background_normal: ''


<CategoryExpenses@ModalView>:
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            id: summary
            size_hint_y: None
            height: 50
            orientation: 'horizontal'
            padding: 10,5,20,10
            over_budget: False
            canvas.before:
                Color:
                    rgb: .8,.8,.8
                Rectangle:
                    size: self.size
                    pos: self.pos
            BoxLayout:
                size_hint_x: None
                width: 24
                orientation: 'vertical'
                Button:
                    size_hint: None, None
                    size: 24, 24
                    background_color: 1,1,1,1
                    color: 0,0,0
                    background_normal: 'back.png'
                    on_press: root.dismiss()
                Widget:
            CategoryRowLabel:
                id: heading
                size_hint_x: 1
                halign: 'center'
            Widget:
                size_hint_x: None
                width: 40
                
        ScrollView:
            canvas.before:
                Color:
                    rgb: 1,1,1
                Rectangle:
                    size: self.size
                    pos: self.pos

            do_scroll_x: False
            bar_width: 20
            scroll_type: ['bars', 'content']
            BoxLayout:
                spacing: 20
                orientation: 'vertical'
                size_hint_y: None
                on_children: self.height = sum([child.height+self.spacing for child in self.children])
                id: expense_list

<ExpenseItem@BoxLayout>:
    orientation: 'horizontal'
    Label:
        on_parent: root.key = self
        color: 0,0,0
        size_hint_x: None
        width: 200
        text_size: self.size
        halign: 'right'
        valign: 'middle'
    Label:
        id: value
        padding: [10,0]
        on_parent: root.value = self
        color: 0,0,0
        text_size: self.size
        halign: 'left'
        shorten: True
        valign: 'middle'
        
<Expense@BoxLayout>:
    padding: 0,0,20,0
    size_hint_y: None
    orientation: 'vertical'
    height: 100

<CategoryRowLabel@Label>:
    color: (1,0,0) if self.parent and self.parent.over_budget else (0,0,0)
    size_hint_x: None
    width: 100
    text_size: self.size
    halign: 'right'
    valign: 'middle'
  
<CategoryRow@ButtonBehavior+BoxLayout>:
    orientation: 'horizontal'
    size_hint_y: None
    height: 50
    spacing: 10
    padding: 20,0
    details: None
    over_budget: False
    canvas.before:
        Color:
            rgb: (.8,.8,.8) if app.indexes and self.details and app.indexes[self.details['category']] % 2  else (1,1,1)
        Rectangle:
            size: self.size
            pos: self.pos
    Widget:
    CategoryRowLabel:
        id: category
        width: 200
        halign: 'right'
    CategoryRowLabel:
        id: total
    CategoryRowLabel:
        id: limit
    CategoryRowLabel:
        width: 60
        id: span
    Widget:

BoxLayout:
    orientation: 'vertical'
    BoxLayout:
        size_hint_y: None
        height: 50
        orientation: 'horizontal'
        padding: 0,5,20,5
        canvas.before:
            Color:
                rgb: .3,.0,.55
            Rectangle:
                size: self.size
                pos: self.pos

        Widget:
        Button:
            on_parent: app.save_button = self
            text: 'Save'
            disabled: True
            size_hint_x: None
            width: 100
            on_press: app.write_exceptions()

    RecycleView:
        on_parent: app.layout = self
        viewclass: 'CategoryRow'
        canvas.before:
            Color:
                rgb: 1,1,1
            Rectangle:
                size: self.size
                pos: self.pos
        RecycleBoxLayout:
            default_size: None, 50
            default_size_hint: 1, None
            size_hint_y: None
            height: self.minimum_height
            orientation: 'vertical'




